(function(){MOGU.qzone_bind=function(b){if(MOGUPROFILE.userid!=""){var c=$("#sina_weibo_follow").size(),a=window.location.href;b==3&&c==0&&a.indexOf("is_qzone")<0&&a.indexOf("/elegant")<0&&a.indexOf("/note")<0&&$.ajax({url:"/collect/ispopqqnewbind",type:"POST",timeout:6E4,data:{},dataType:"json",success:function(a){if(a==null)alert(MGLANG.msgTimeout);else{var b=a.status.msg;a.status.code!=1001&&alert(b)}}})}}})(jQuery);
(function(a){var h="";MOGU.User_Ctu_Mobile_Verifier=function(){if(a(".mode").size()!=0){var b="";a(".info input[name='mobck']").focus(function(){if(a(this).val()=="\u8bf7\u8f93\u5165\u4f60\u7684\u624b\u673a\u53f7"||a(this).val()=="\u8bf7\u8f93\u5165\u9080\u8bf7\u7801")a(this).val(""),a(this).css("color","#000")});a(".info input[name='mobck']").blur(function(){a(this).val()==""&&(a(".info .sp").text()=="\u624b\u673a\u53f7\u7801\uff1a"?a(this).val("\u8bf7\u8f93\u5165\u4f60\u7684\u624b\u673a\u53f7"):
a(".info .sp").text()=="\u9080\u8bf7\u7801\uff1a"&&a(this).val("\u8bf7\u8f93\u5165\u9080\u8bf7\u7801"),a(this).css("color","#999"))});var c=90,f=function(){c==0?(a(".cktime").remove(),a(".info").after('<a href="javascript:;" class="rsck">\u91cd\u65b0\u53d1\u9001</a>')):(a(".cktime em").text(c),c--,setTimeout(f,1E3))};a(".rsck").live("click",function(){var d=a(".info input[name='mobck']");a(".check").css("visibility","hidden");var e=d.offset();a("body").append('<img src="/img/loading_blue1.gif" style="display:hidden;position:absolute;" id="submit_loading">');
a("#submit_loading").css({left:e.left+d.width()/2-10,top:e.top+6}).show();d.val("");a.ajax({url:"/user/mobileverifier",type:"POST",timeout:6E4,dataType:"json",data:{number:b,is_resend:"yes"},success:function(e){if(e==null)alert(MGLANG.msgTimeout);else{var i=e.status.msg;e.status.code==1205?(a(".check span")[0]?a(".check span").text(b):(a(".check").css("color","#000"),a(".check").html("\u6211\u4eec\u5df2\u7ecf\u5c06\u9080\u8bf7\u7801\u53d1\u9001\u5230\u4f60\u7684\u624b\u673a\uff08<span>"+b+"</span>\uff09")),
a(".check").css("visibility","visible"),d.css("color","#999"),d.val("\u8bf7\u8f93\u5165\u9080\u8bf7\u7801"),a(".rsck").remove(),a(".info").append('<span class="cktime">\u91cd\u65b0\u53d1\u9001\uff08<em>90</em>s\uff09</span>'),c=90,f()):alert(i)}},error:function(a,b){"timeout"==b&&alert(MGLANG.msgTimeout)},complete:function(){a("#submit_loading").remove()}})});a(".getcheck").click(function(){var d=a(".info input[name='mobck']");b=d.val();if(MGTOOL.trim(b)==""||MGTOOL.trim(b)=="\u8bf7\u8f93\u5165\u4f60\u7684\u624b\u673a\u53f7")alert("\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801");
else{var e={number:b};if(a("#checkcode_change").size()!=0){e=a(".yzm_pic input").val();if(MGTOOL.trim(e)==""){alert("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801");return}e={number:b,register_ctu_check:e}}a(".check").css("visibility","hidden");var c=d.offset();a("body").append('<img src="/img/loading_blue1.gif" style="display:hidden;position:absolute;" id="submit_loading">');a("#submit_loading").css({left:c.left+d.width()/2-10,top:c.top+6}).show();d.val("");a.ajax({url:"/user/mobileverifier",type:"POST",
timeout:6E4,dataType:"json",data:e,success:function(c){if(c==null)alert(MGLANG.msgTimeout);else{var e=c.status.msg;c.status.code==1205?(a(".check span")[0]?a(".check span").text(b):(a(".check").css("color","#000"),a(".check").html("\u6211\u4eec\u5df2\u7ecf\u5c06\u9080\u8bf7\u7801\u53d1\u9001\u5230\u4f60\u7684\u624b\u673a\uff08<span>"+b+"</span>\uff09")),a(".check").css("visibility","visible"),h=b,a(".info .sp").text("\u9080\u8bf7\u7801\uff1a"),d.css("color","#999"),d.val("\u8bf7\u8f93\u5165\u9080\u8bf7\u7801"),
a(".getcheck,.yzm_pic,.num_tip").remove(),a(".info").append('<span class="cktime">\u91cd\u65b0\u53d1\u9001\uff08<em>90</em>s\uff09</span>'),a(".info").after('<a href="javascript:;" class="sure"></a>'),f()):(a(".check").text(e),a(".check").css("color","#ff0000"),a(".check").css("visibility","visible"),d.val(b))}},error:function(a,b){"timeout"==b&&alert(MGLANG.msgTimeout)},complete:function(){a("#submit_loading").remove()}})}});a(".sure").live("click",function(){a(".check").css("visibility","hidden");
var c=a(".info input[name='mobck']").val();MGTOOL.trim(c)==""||MGTOOL.trim(c)=="\u8bf7\u8f93\u5165\u9080\u8bf7\u7801"?alert("\u8bf7\u8f93\u5165\u9080\u8bf7\u7801"):a.ajax({url:"/user/mobileverifier",type:"POST",timeout:6E4,dataType:"json",data:{code:c,number:h,is_resend:"yes"},success:function(c){if(c==null)alert(MGLANG.msgTimeout);else{var d=c.status.msg;c.status.code==1201?(a("#tmobck").val(b),a("#myform").submit()):(a(".check").text(d),a(".check").css("color","#ff0000"),a(".check").css("visibility",
"visible"))}},error:function(a,b){"timeout"==b&&alert(MGLANG.msgTimeout)}})})}};MOGU.User_Login_Validate=function(){a("#isban").val()&&alert("\u4f60\u8f93\u5165\u5bc6\u7801\u9519\u8bef\u7684\u6b21\u6570\u592a\u591a\u4e86\uff0c\u8bf7\u8fc75\u5206\u949f\u540e\u518d\u5c1d\u8bd5\u3002");a(".lg_form").size()!=0&&(a(".lg_name input[name='email']").focus(function(){var b=a(".lg_name input[name='email']");b.css("color","#000");b.val()=="\u90ae\u7bb1 \u6216 \u6635\u79f0"&&b.val("")}),a(".lg_name input[name='email']").blur(function(){var b=
a(".lg_name input[name='email']");MGTOOL.trim(b.val())==""?(b.val("\u90ae\u7bb1 \u6216 \u6635\u79f0"),b.css("color","#999999")):a(".err_name").css("visibility")=="visible"&&a(".err_name").css("visibility","hidden")}),a(".lg_chk input[name='check']").focus(function(){a(".lg_chk input[name='check']").css("color","#000")}),a(".lg_chk input[name='check']").blur(function(){var b=a(".lg_chk input[name='check']");MGTOOL.trim(b.val())!=""&&a(".err_chk").css("visibility")=="visible"&&a(".err_chk").css("visibility",
"hidden")}),a(".lg_pass input[name='password']").focus(function(){a(".lg_pass input[name='password']").css("color","#000")}),a(".lg_pass input[name='password']").blur(function(){var b=a(".lg_pass input[name='password']");MGTOOL.trim(b.val())!=""&&a(".err_pass").css("visibility")=="visible"&&a(".err_pass").css("visibility","hidden")}),a("#myform").submit(function(){a(".iserror").css("display","none");var b=a(".lg_name input[name='email']").val();if(MGTOOL.trim(b)=="\u90ae\u7bb1 \u6216 \u6635\u79f0")return a(".err_name").css("visibility",
"visible"),!1;b=a(".lg_pass input[name='password']").val();if(MGTOOL.trim(b)=="")return a(".err_pass").css("visibility","visible"),!1;if(a(".lg_chk")[0]&&(b=a(".lg_chk input[name='check']").val(),MGTOOL.trim(b)==""))return a(".err_chk").css("visibility","visible"),!1;return!0}))};MOGU.User_Register_Validate=function(){var b,c,f,d,e,j,i=function(){a(".err_email").css("visibility","visible").css("padding-top","10px").css("height","26px");var c=a.trim(a("#register_form .ipt_mail .text").val());c==""?(a(".err_email").html('<img src="/img/error1.png" /><span style="color:#ff89a7; margin-left:8px; margin-top:0;">\u8bf7\u586b\u5199\u90ae\u4ef6\u5730\u5740</span>'),
b=!1):a.ajax({url:"/user/ajaxcheck",type:"POST",timeout:6E4,data:{email:c},async:!1,dataType:"json",success:function(c){if(c==null)alert(MGLANG.msgTimeout);else{var g=c.status.msg;c.status.code==1001?(a(".err_email").html('<img src="/img/ok_01.png" />'),b=!0):(a(".err_email").html('<img src="/img/error1.png" /><span style="color:#ff89a7; margin-left:8px; margin-top:0;">'+g+"</span>"),b=!1)}},error:function(a,b){"timeout"==b&&alert(MGLANG.msgTimeout)}});return b},h=function(){a(".err_ulike").css("visibility",
"visible").css("padding-top","10px").css("height","26px");var b=a.trim(a("#register_form .ipt_ulike .text").val());b==""?(a(".err_ulike").html('<img src="/img/error1.png" /><span style="color:#ff89a7; margin-left:8px; margin-top:0;">\u8bf7\u586b\u5199\u6635\u79f0</span>'),c=!1):a.ajax({url:"/user/ajaxcheck",type:"POST",timeout:6E4,data:{ulike:b},async:!1,dataType:"json",success:function(b){if(b==null)alert(MGLANG.msgTimeout);else{var g=b.status.msg;b.status.code==1001?(a(".err_ulike").html('<img src="/img/ok_01.png" />'),
c=!0):(a(".err_ulike").html('<img src="/img/error1.png" /><span style="color:#ff89a7; margin-left:8px; margin-top:0;">'+g+"</span>"),c=!1)}},error:function(a,b){"timeout"==b&&alert(MGLANG.msgTimeout)}});return c},l=function(){a(".err_password").css("visibility","visible").css("padding-top","10px").css("height","26px");var b=a("#register_form .ipt_password .text").val();b==""?(a(".err_password").html('<img src="/img/error1.png" /><span style="color:#ff89a7; margin-left:8px; margin-top:0;">\u8bf7\u586b\u5199\u5bc6\u7801</span>'),
f=!1):(b=b.replace(/[^\x00-\xFF]/g,"**").length,b>=6&&b<=20?(a(".err_password").html('<img src="/img/ok_01.png" />'),f=!0):(a(".err_password").html('<img src="/img/error1.png" /><span style="color:#ff89a7; margin-left:8px; margin-top:0;">'+(b<6?"\u5bc6\u7801\u592a\u77ed\u5566\uff0c\u81f3\u5c11\u89816\u4f4d\u54e6":"\u5bc6\u7801\u8fc7\u957f")+"</span>"),f=!1));return f},m=function(){a(".err_rstpassword").css("visibility","visible").css("height","26px");var b=a("#register_form .ipt_respassword .text").val();
b==""?(a(".err_rstpassword").html('<img src="/img/error1.png" /><span style="color:#ff89a7; margin-left:8px; margin-top:0;">\u8bf7\u91cd\u590d\u8f93\u5165\u4e00\u6b21\u5bc6\u7801</span>'),d=!1):a(".ipt_password .text").val()==b&&a(".err_password img").attr("src").indexOf("ok")>0?(d=!0,a(".err_rstpassword").html('<img src="/img/ok_01.png" />')):(b=a(".err_password img").attr("src").indexOf("ok")<0?'<img src="/img/error1.png" /><span style="color:#ff89a7; margin-left:8px; margin-top:0;">\u8bf7\u5148\u8f93\u5165\u6b63\u786e\u7684\u5bc6\u7801</span>':
'<img src="/img/error1.png" /><span style="color:#ff89a7; margin-left:8px; margin-top:0;">\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4</span>',a(".err_rstpassword").html(b),d=!1);return d},n=function(){var b=a("#register_form .ipt_check .check");if(b.length==0)return e=!0;a(".err_check").css("visibility","visible").css("padding-top","16px").css("height","26px");b=b.val();e=!0;b==""?(a(".err_check").html('<img src="/img/error1.png" /><span style="color:#ff89a7; margin-left:8px; margin-top:0;">\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801</span>'),
e=!1):(a(".err_check").html('<img src="/img/ok_01.png" />'),e=!0);return e};a("#register_form .ipt_mail .text").blur(i);a("#register_form .ipt_mail .text").focus(function(){a(".err_email").css("visibility","visible")});a("#register_form .ipt_ulike .text").blur(h);a("#register_form .ipt_ulike .text").focus(function(){a(".err_ulike").css("visibility","visible")});a("#register_form .ipt_password .text").blur(l);a("#register_form .ipt_password .text").focus(function(){a(".err_password").css("visibility",
"visible")});a("#register_form .ipt_respassword .text").blur(m);a("#register_form .ipt_respassword .text").focus(function(){a(".err_rstpassword").css("visibility","visible")});a("#register_form .ipt_check .check").blur(n);a("#register_form .ipt_check .check").focus(function(){a(".err_check").css("visibility","visible")});a(".ipt_box .box").click(function(){a(this).attr("checked")!=void 0?a(".ipt_sub .sub").attr("disabled",!1):a(".ipt_sub .sub").attr("disabled","disabled")});a("#register_form form").submit(function(){function g(){a("#register_form .sub").prop("disabled",
!1)}a("#register_form .sub").prop("disabled",!0);if(!b&&!i())return g(),!1;if(!c&&!h())return g(),!1;if(!f&&!l())return g(),!1;if(!d&&!m())return g(),!1;if(!e&&!n())return g(),!1;if(!j)if(MOGU.imgCodeCheck())a(".err_check").html('<img src="/img/ok_01.png" />'),j=!0;else{var k;a(".err_check").html('<div><img src="/img/error1.png"><span style="color:#ff89a7; margin-left:8px; margin-top:0;">\u8bf7\u70b9\u51fb\u56fe\u7247\uff0c\u5c06\u5b83\u4eec\u65cb\u8f6c\u5230\u6b63\u786e\u65b9\u5411</span></div>');
j=!1;g();return!1}a("#isqq").val()==1&&(k=MGTOOL.getCookie("qzone_add"),MGTOOL.empty(k)||window.open("http://www.mogujie.com/book/elegant?is_qq_pop_register=1"),setTimeOut(function(){return!0},500))})};MOGU.User_Find_Password=function(){a(".text").size!=0&&(a(".text").focus(function(){a(this).css("border-color","#83b900")}),a(".text").blur(function(){a(this).css("border-color","#cfcfcf")}))};MOGU.User_Check_Submit_Email=function(){a("#bs_get_password_mail").size==0||a("#bs_submit_email").size==0||
a("#bs_submit_email").submit(function(){var b=/^([A-Za-z0-9])([\w\-\.])*@(vip\.)?([\w\-])+(\.)(com|com\.cn|net|cn|net\.cn|org|biz|info|gov|gov\.cn|edu|edu\.cn)$/,c=a("#bs_get_password_mail").val();return c.length>0&&b.test(c)?(a(".bs_input_error").first().html('<img src="/img/ok_01.png" /><span class="bs_span_success">\u90ae\u7bb1\u586b\u5199\u5b8c\u6210</span>'),!0):(a(".bs_input_error").first().html('<img src="/img/error1.png" /><span class="bs_span_fail">\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u68c0\u67e5\u91cd\u8bd5</span>'),
!1)})};MOGU.User_Check_Submit_Password=function(){a("#bs_reset_password").size!=0&&a("#bs_reset_password").submit(function(){var b=a("#bs_get_password").val(),c=a("#bs_get_confirm").val();return b.length<=5?(b='<img src="/img/error1.png" /><span class="bs_span_fail">\u65b0\u5bc6\u7801\u957f\u5ea6\u81f3\u5c11\u516d\u4f4d</span>',a(".bs_input_error:odd").empty(),a(".bs_input_error").first().html(b),!1):c.length<=5?(b='<img src="/img/error1.png" /><span class="bs_span_fail">\u786e\u8ba4\u5bc6\u7801\u957f\u5ea6\u81f3\u5c11\u516d\u4f4d</span>',
a(".bs_input_error").first().empty(),a(".bs_input_error:odd").html(b),!1):(a(".bs_input_error").first().empty(),c==b?(a(".bs_input_error:odd").html('<img src="/img/ok_01.png" /><span class="bs_span_success">\u586b\u5199\u5b8c\u6210</span>'),!0):(a(".bs_input_error:odd").html('<img src="/img/error1.png" /><span class="bs_span_fail">\u65b0\u5bc6\u7801\u4e0e\u786e\u8ba4\u5bc6\u7801\u4e0d\u4e00\u81f4\uff0c\u8bf7\u68c0\u67e5\u91cd\u8bd5</span>'),!1))})};MOGU.Invite_ver=function(){a(".invite_warp #ivform").submit(function(){a.ajax({url:"/mogujiainvitecode/submitcode",
type:"POST",timeout:6E4,data:{inviteCode:a(".invite_warp #ivform")[0].inviteCode.value},dataType:"json",success:function(a){var c=a.status.msg;if(a.status.code==1001){var c=a.result.msg,f=a.result.url;a.result.success=="0"?alert(c):location.href=f+"?invite=1"}else alert(c)},error:function(a,c){"timeout"==c&&alert(MGLANG.msgTimeout)}});return!1})};MOGU.Invite_ver();MOGU.User_Ctu_Mobile_Verifier();MOGU.User_Login_Validate();MOGU.User_Register_Validate();MOGU.User_Find_Password();MOGU.User_Check_Submit_Email();
MOGU.User_Check_Submit_Password();MOGU.Globe_Checkcode_Change()})(jQuery);
